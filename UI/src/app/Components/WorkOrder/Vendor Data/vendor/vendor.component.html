<!-- added -->
<h4 class="pac-header">
  {{ isAdding ? "ADD VENDOR" : "UPDATE VENDOR" }}
</h4>

<form [formGroup]="formData" (ngSubmit)="save()">
  <div class="example-container">
    <mat-card class="card" style="padding: 0">
      <mat-card-header>
        <b></b>
      </mat-card-header>
      <mat-card-content class="cmn-mat-card-content mat-card-scroll">
        <div class="row" class="upload-doc-div">
          <button
            mat-flat-button
            class="btn-class primary"
            (click)="viewDownLoads()"
            type="button"
          >
            Attach Documents
          </button>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field class="mat-45" appearance="outline">
            <mat-label>Search/Select Project</mat-label>
            <input
              type="text"
              matInput
              [value]="
                selectedProject.projectName ? selectedProject.projectName : ''
              "
              (input)="searchProject($event)"
              [formControl]="project"
              [matAutocomplete]="projectAuto"
            />
            <mat-autocomplete
              #projectAuto="matAutocomplete"
              (optionSelected)="onProjectSelect($event)"
              [displayWith]="displayProject"
              [ngClass]="{
                'custom-error-style':
                  isFormSubmitted && formData.get('projectId')?.value === null
              }"
            >
              <mat-option *ngFor="let option of projects" [value]="option">
                {{ option.displayProjectName }}
              </mat-option>
            </mat-autocomplete>
            <div
              *ngIf="
                isFormSubmitted && formData.get('projectId')?.value === null
              "
              class="error-message"
            >
              Project is Required
            </div>
          </mat-form-field>
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Vendor Name</mat-label>
            <input matInput formControlName="vendorName" type="text" />
            <mat-error *ngIf="formData.get('vendorName')?.hasError('required')"
              >Name is required</mat-error
            >
          </mat-form-field>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Contact Number</mat-label>
            <input
              matInput
              formControlName="contactNumber"
              appPhoneNumberMaxLength
            />
            <mat-error
              *ngIf="formData.get('contactNumber')?.hasError('required')"
            >
              Contact Number is required.</mat-error
            >
            <mat-error
              *ngIf="
                formData.get('contactNumber')?.invalid &&
                (formData.get('contactNumber')?.dirty ||
                  formData.get('contactNumber')?.touched)
              "
            >
              <!-- Error for incorrect length -->
              <span
                *ngIf="
                formData.get('contactNumber')?.errors?.['length'] ||
                formData.get('contactNumber')?.value?.length !== 10
              "
              >
                Phone number must contain exactly 10 digits.
              </span>
              <!-- Error for pattern mismatch -->
              <span
                *ngIf="
                formData.get('contactNumber')?.errors?.['pattern'] &&
                formData.get('contactNumber')?.value?.length === 10
              "
              >
                Phone number must start with 6, 7, 8, or 9.
              </span>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" />
            <mat-error *ngIf="formData.get('email')?.hasError('email')"
              >Please enter a valid email address</mat-error
            >
          </mat-form-field>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Date Of Joining</mat-label>
            <input
              matInput
              [matDatepicker]="startDatePicker"
              (click)="startDatePicker.open()"
              formControlName="dateOfJoining"
              [value]="
                formData.get('dateOfJoining')?.value | date : 'yyyy-MM-dd'
              "
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="startDatePicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #startDatePicker></mat-datepicker>
            <mat-error *ngIf="formData.get('startDate')?.hasError('required')"
              >Start date is required.</mat-error
            >
          </mat-form-field>

          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Company Name</mat-label>
            <input matInput formControlName="companyName" />
          </mat-form-field>
        </div>
        <div class="row" style="padding: 0 15px">
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Gst Number</mat-label>
            <input matInput formControlName="gstNumber" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>PAN Number</mat-label>
            <input matInput formControlName="panNumber" />
          </mat-form-field>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Aadhar Number</mat-label>
            <input matInput formControlName="aadharNumber" type="number" />
          </mat-form-field>
          <div class="mat-45">
            <label class="pb-1">Do you have MSME Number </label><br />
            <label class="ps-2 pb-1">
              <input
                type="radio"
                formControlName="msmeExists"
                [value]="true"
                (change)="onMsmeExistsChange(true)"
              />
              Yes </label
            ><br />
            <label class="ps-2">
              <input
                type="radio"
                formControlName="msmeExists"
                (change)="onMsmeExistsChange(false)"
                [value]="false"
              />
              No </label
            ><br />
            <mat-error
              *ngIf="
                isFormSubmitted &&
                formData.get('msmeExists')?.hasError('required')
              "
            >
              Please Select one Option.
            </mat-error>
          </div>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field
            appearance="outline"
            class="mat-50"
            *ngIf="formData.get('msmeExists')?.value === true"
          >
            <mat-label>MSME Number</mat-label>
            <input matInput formControlName="msmeNumber" />
            <mat-error *ngIf="formData.get('msmeNumber')?.hasError('required')">
              MSME Number is required when "Yes" is selected.
            </mat-error>
          </mat-form-field>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>BOCW License Number</mat-label>
            <input matInput formControlName="bocwLicenseNumber" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Bank Name</mat-label>
            <input matInput formControlName="bankName" />
          </mat-form-field>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>IFSC Code</mat-label>
            <input matInput formControlName="ifscCode" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="mat-45">
            <mat-label>Account Number</mat-label>
            <input matInput formControlName="accountNumber" type="number" />
          </mat-form-field>
        </div>

        <div class="row" style="padding: 0 15px">
          <mat-form-field
            class="example-full-width"
            class="mat-50"
            appearance="outline"
          >
            <mat-label>Search/Select Vendor Type</mat-label>
            <input
              type="text"
              matInput
              [value]="
                selectedVendorType.commonRefValue
                  ? selectedVendorType.commonRefValue
                  : ''
              "
              (input)="searchVendorType($event)"
              [formControl]="typeVendor"
              [matAutocomplete]="vendorTypeAuto"
            />
            <mat-autocomplete
              #vendorTypeAuto="matAutocomplete"
              (optionSelected)="onVendorTypeSelect($event)"
              [displayWith]="displayVendorType"
            >
              <mat-option *ngFor="let option of vendorTypes" [value]="option">
                {{ option.commonRefValue }}
              </mat-option>
            </mat-autocomplete>
            <div
              *ngIf="
                isFormSubmitted &&
                formData.get('vendorTypeId')?.hasError('required')
              "
              class="error-message"
            >
              Vendor Type is Required
            </div>
          </mat-form-field>
        </div>

        <div class="row" style="padding: 0 15px">
          <div appearance="outline" class="mat-45">
            <mat-label>Present Address</mat-label>

            <textarea
              matInput
              formControlName="presentAddress"
              rows="1"
              placeholder="Present Address"
              style="flex: 1; width: 100%; padding: 5px 10px; font-size: 13px"
              (input)="autoResizeAddress1()"
              #address1Textarea
            ></textarea>
          </div>
          <div appearance="outline" class="mat-45">
            <mat-label>Permanent Address</mat-label>
            <textarea
              matInput
              formControlName="permanentAddress"
              rows="1"
              placeholder="Permanent Address"
              style="flex: 1; width: 100%; padding: 5px 10px; font-size: 13px"
              (input)="autoResizeAddress2()"
              #address2Textarea
            ></textarea>
          </div>
        </div>
      </mat-card-content>
      <mat-card-footer class="add-mat-card-footer">
        <div>
          <button
            mat-flat-button
            class="btn-class accent"
            (click)="gotoVendors()"
            type="button"
          >
            BACK
          </button>
          <button
            *ngIf="isAdding"
            mat-flat-button
            class="btn-class warn"
            (click)="clearForm()"
            type="button"
          >
            RESET
          </button>
          <button mat-flat-button class="btn-class primary" type="submit">
            {{ isAdding ? "ADD" : "UPDATE" }}
          </button>
        </div>
      </mat-card-footer>
    </mat-card>
  </div>
</form>
