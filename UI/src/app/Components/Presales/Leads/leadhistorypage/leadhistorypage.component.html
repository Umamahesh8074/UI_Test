<div class="lead-history-button-row">
  <div class="title-div">
    <span class="lead-header">LEAD HISTORY</span>
  </div>
  <div style="margin-top: 10px">
    <button mat-flat-button class="btn-class accent" (click)="backToLeads()">
      <!-- <mat-icon>keyboard_return</mat-icon> -->
      BACK
    </button>
  </div>
</div>

<div class="lead-details">
  <div class="row" class="common-lead-info">
    <div class="column1">
      <span><b>Lead Id:</b> {{ leadId }}</span>
    </div>
    <div class="column2">
      <span><b>Customer Name:</b> {{ leadName || "N/A" }}</span>
    </div>
    <div class="column3">
      <span><b>Opportunity Id:</b> {{ opportunityId }}</span>
    </div>
  </div>
  <!-- <div class="column1">
      <span><b>Lead Id:</b> {{ leadId }}</span>
    </div>
    <div class="column2">
      <span><b>Customer Name:</b> {{ leadName || "N/A" }}</span>
    </div>
    <div class="column3">
      <span><b>Opportunity Id:</b> {{ leadOpportunityId }}</span>
    </div> -->

  <mat-card class="cmn-card">
    <mat-card-content class="cmn-card-content">
      <div class="tab-head">
        <table
          matSort
          mat-table
          [dataSource]="leadHistories"
          class="mat-elevation-z8"
        >
          <!-- Lead Id -->
          <ng-container matColumnDef="leadId">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              #
            </th>
            <td mat-cell *matCellDef="let i = index">
              {{ pageIndex * pageSize + i + 1 }}
            </td>
          </ng-container>
          <ng-container matColumnDef="sourceName">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Source
            </th>
            <td mat-cell *matCellDef="let leadHistory">
              {{ leadHistory.sourceName || "N/A" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="subSourceName">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Sub Source
            </th>
            <td mat-cell *matCellDef="let leadHistory">
              {{ leadHistory.subSourceName || "N/A" }}
            </td>
          </ng-container>
          <!-- Lead status -->
          <ng-container matColumnDef="leadStatus">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Status
            </th>
            <td mat-cell *matCellDef="let leadHistory">
              {{ leadHistory.leadStatus }}
            </td>
          </ng-container>
          <ng-container matColumnDef="recordedDate">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Recorded Date
            </th>
            <td
              mat-cell
              *matCellDef="let leadHistory"
              matTooltip="{{ leadHistory.recordedDate | date : 'medium' }}"
            >
              {{ leadHistory.recordedDate | date : "mediumDate" }}
            </td>
          </ng-container>
          <!-- Note -->
          <ng-container matColumnDef="note">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Description
            </th>
            <td mat-cell *matCellDef="let leadHistory" style="width: 500px">
              {{ leadHistory.note }}
            </td>
          </ng-container>
          <!-- presaleMemberName -->
          <ng-container matColumnDef="presaleMemberName">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Presales Member
            </th>
            <td mat-cell *matCellDef="let leadHistory">
              {{ leadHistory.presaleMemberName || "N/A" }}
            </td>
          </ng-container>
          <!-- saleMemberName -->
          <ng-container matColumnDef="saleMemberName">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Sales Member
            </th>
            <td mat-cell *matCellDef="let leadHistory">
              {{ leadHistory.saleMemberName || "N/A" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="createdBy">
            <th
              mat-header-cell
              *matHeaderCellDef
              style="background-color: #004869; color: white"
            >
              Created By
            </th>
            <td mat-cell *matCellDef="let leadHistory">
              {{ leadHistory.createdBy || "N/A" }}
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row of leadHistories; columns: displayedColumns"
          ></tr>
        </table>
      </div>
    </mat-card-content>
    <mat-card-footer>
      <mat-paginator
        [length]="totalItems"
        [pageSize]="pageSize"
        [pageSizeOptions]="pageSizeOptions"
        (page)="onPageChange($event)"
        showFirstLastButtons
      ></mat-paginator>
    </mat-card-footer>
  </mat-card>
  <!-- <div class="lead-history-button-row">
    <button mat-flat-button class="btn-class accent" (click)="backToLeads()">
      <mat-icon>keyboard_return</mat-icon>
      BACK
    </button>
  </div> -->
</div>
