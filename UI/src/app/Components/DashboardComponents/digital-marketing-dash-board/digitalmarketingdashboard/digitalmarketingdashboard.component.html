<div style="width: 100%; height: 100%; overflow: auto">
  <div class="main-head">
    <div class="header-div">
      <div class="header-cont">
        <h1 class="head-text">Dashboard</h1>
        <p class="date-txt" style="margin: 0">{{ today }}</p>
      </div>
      <!-- <p class="user-txt">
      Hi {{ user.userName }}, here's what's happening today
    </p> -->
    </div>

    <div
      class="day-selector"
      style="display: flex; justify-content: space-evenly; align-items: center"
      [formGroup]="formData"
    >
      <div class="search-box" style="padding-top: 1rem">
        <mat-form-field appearance="outline" id="project-filter">
          <input
            type="text"
            placeholder="Select Projects"
            aria-label="Select projects"
            matInput
            [matAutocomplete]="projectAuto"
            [formControl]="project"
            (input)="searchProject($event)"
          />
        </mat-form-field>

        <mat-autocomplete #projectAuto="matAutocomplete">
          <mat-option>
            <mat-checkbox
              #allProjectSelected
              (click)="onAllSelectProject()"
              [checked]="isProjectAllSelected()"
              >All</mat-checkbox
            ></mat-option
          >
          <mat-option
            *ngFor="let project of projects"
            (click)="$event.preventDefault()"
          >
            <div (click)="$event.stopPropagation()">
              <mat-checkbox
                [checked]="isSelectedProject(project.projectId)"
                (change)="onProjectSelect(project, $event)"
                (click)="$event.stopPropagation()"
              >
                {{ project.projectName }}
              </mat-checkbox>
            </div>
          </mat-option>
        </mat-autocomplete>

        <button
          mat-icon-button
          matSuffix
          (click)="onProjectSelectButtonClick()"
          type="button"
        >
          <mat-icon>search</mat-icon>
        </button>
      </div>
      <div class="proxy-srch">
        <mat-form-field
          class="example-full-width"
          class="mat-45"
          appearance="outline"
        >
          <mat-label>Proxy Login</mat-label>
          <input
            type="text"
            matInput
            (input)="searchUser($event)"
            [formControl]="User"
            [matAutocomplete]="userAuto"
          />
          <mat-autocomplete
            #userAuto="matAutocomplete"
            (optionSelected)="onUserSelect($event)"
            [displayWith]="displayUser"
          >
            <mat-option *ngFor="let option of UserDetails" [value]="option">
              {{ option.userName | titlecase }}
              <span style="font-weight: bold">
                - {{
                  option.roleName.split(" ").length > 1
                    ? (option.roleName | titlecase)
                    : (option.roleName | uppercase)
                }}
              </span>
              <span>
                <ng-container *ngIf="option.companyName">
                  ({{ option.companyName | titlecase }})
                </ng-container>
              </span>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class="select-day">
        <mat-form-field appearance="outline" style="margin-right: 20px">
          <mat-label>Select Day</mat-label>
          <mat-select
            [(value)]="selectedDay"
            (selectionChange)="handleDaySelection($event.value)"
          >
            <mat-option *ngFor="let day of days" [value]="day">
              {{ day.commonRefValue }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field
          *ngIf="showDateRangePicker"
          class="time-picker"
          appearance="outline"
          style="margin-left: 20px"
        >
          <mat-label>Select Date Range</mat-label>
          <mat-date-range-input [rangePicker]="picker" (click)="picker.open()">
            <input
              matStartDate
              placeholder="Start date"
              formControlName="customStartDate"
              (focus)="picker.open()"
              (dateChange)="onDateRangeChange()"
            />
            <input
              matEndDate
              placeholder="End date"
              formControlName="customEndDate"
              (focus)="picker.open()"
              (dateChange)="onDateRangeChange()"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>

        <mat-form-field
          class="example-full-width"
          appearance="outline"
          *ngIf="
            !(
              user.roleName.toLowerCase() === 'channel partner' ||
              user.roleName.toLowerCase() === 'cp user'
            )
          "
        >
          <mat-label>Select Source</mat-label>
          <mat-select
            [value]="sourceIds"
            multiple
            (selectionChange)="onSelectionSourceChange($event)"
          >
            <mat-option value="">All</mat-option>
            <mat-option
              *ngFor="let source of sources"
              [value]="source.leadSourceId"
            >
              {{ source.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field
          class="example-full-width"
          appearance="outline"
          *ngIf="
            !(
              user.roleName.toLowerCase() === 'channel partner' ||
              user.roleName.toLowerCase() === 'cp user'
            )
          "
          style="padding-left: 10px; padding-right: 10px"
        >
          <input
            type="text"
            placeholder="Select Sub Sources"
            aria-label="Select Sub Sources"
            matInput
            [matAutocomplete]="auto"
            [formControl]="subSourceControl"
            (input)="searchSubSource($event)"
          />

          <mat-autocomplete #auto="matAutocomplete">
            <mat-option
              *ngFor="let subSource of filteredSubSources"
              (click)="$event.preventDefault()"
            >
              <div (click)="$event.stopPropagation()">
                <mat-checkbox
                  [checked]="isSelected(subSource.leadSubSourceId)"
                  (change)="onSelectionSubSourceChange(subSource, $event)"
                  (click)="$event.stopPropagation()"
                >
                  {{ subSource.name }}
                </mat-checkbox>
              </div>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>

      <mat-form-field class="mat-45" appearance="outline" style="width: 30%">
        <mat-label>Camapagin</mat-label>
        <input
          type="text"
          matInput
          [formControl]="campagin"
          [matAutocomplete]="campaginAuto"
          [value]="campaginName ? campaginName : 'All'"
          (input)="onSearchCampaginName($any($event).target?.value)"
        />
        <mat-autocomplete
          #campaginAuto="matAutocomplete"
          (optionSelected)="onCampaginSelect($event)"
          [displayWith]="displayFn"
        >
          <mat-option value="">All</mat-option>
          <mat-option *ngFor="let option of campaginNames" [value]="option">{{
            option.campaginName
          }}</mat-option>
        </mat-autocomplete>
      </mat-form-field>
              <mat-slide-toggle formControlName="isExpried" (change)="onToggle($event)" class="isExpried_toggle"
          [checked]="!isExpried" style="padding-left:20px">
          Include Expired Leads
        </mat-slide-toggle>
      <app-refresh-button (refreshEvent)="ngOnInit()"></app-refresh-button>
    </div>
  </div>

  <!-- Current Status start -->
  <div class="margin-20">
    <mat-accordion>
      <mat-expansion-panel
        [expanded]="panel1Expanded"
        (opened)="onPanelOpen(1)"
        (closed)="onPanelClose(1)"
      >
        <mat-expansion-panel-header>
          <mat-panel-title> Current Lead Status Count </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="cards">
          <div style="width: 100%;">
            <h2 style="padding-left: 15px;">Pre Sales</h2>
          <div style="display: flex;direction: row;width: 100%;">
          <mat-card (click)="navigateToLeadsCurrentStatus()" class="mat-card bg-six">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="leads">Total Leads</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="leadsCount">
                  {{ currentDashboardTotalLeads }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >assignment_add</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <!-- <mat-card (click)="navigateToSaleLeads()" class="mat-card bg-darkColor">
        <div class="mat-card-hdiv">
          <h3 class="cardtitle" id="assignedLeads">Sales Assigned Leads</h3>
        </div>
        <div class="mat-card-countdiv">
          <div class="mat-card-count">
            <h2 class="total" id="assignedLeadsCount">{{ salesLeads }}</h2>
          </div>
          <div class="mat-card-icondiv">
            <mat-icon
              class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
              >assignment_add</mat-icon
            >
          </div>
        </div>
      </mat-card> -->
          <mat-card
            (click)="navigateToLeadsByCurrentStatus(newLeadId)"
            class="mat-card bg-nine"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="newLeads">Pending Leads</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="newLeadsCount">{{ currentNewLeads }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >contact_page</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <!-- <mat-card
        (click)="navigateToUnassignedLeads()"
        class="mat-card bg-twelve"
      >
        <div class="mat-card-hdiv">
          <h3 class="cardtitle" id="unassignedLeads">Unassigned Leads</h3>
        </div>
        <div class="mat-card-countdiv">
          <div class="mat-card-count">
            <h2 class="total" id="unassignedLeadsCount">
              {{ unassignedLeads }}
            </h2>
          </div>
          <div class="mat-card-icondiv">
            <mat-icon
              class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
              >assignment_sub</mat-icon
            >
          </div>
        </div>
      </mat-card> -->

          <mat-card
            (click)="navigateToLeadsByCurrentStatus(followUpId)"
            class="mat-card bg-seven"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="followups">Follow Ups</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="followupCount">{{ currentFollowups }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >contact_phone</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card
            (click)="navigateToLeadsByCurrentStatus(siteVisitConfirmId)"
            class="mat-card bg-fifteen"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="followups">Site Visit Confirm</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="followupCount">
                  {{ currentSiteVisitConfirm }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >directions_walk</mat-icon
                >
              </div>
            </div>
          </mat-card>

          <!-- <mat-card
        (click)="navigateToFollowups('Site visit Confirm ')"
        class="mat-card bg-purple"
      >
        <h3 class="cardtitle">Scheduled Visits</h3>
        <h2 class="total">{{ scheduledVisits }}</h2>
      </mat-card> -->
         
          <mat-card (click)="navigateToLeadsByCurrentStatus(siteVisitProspectId)" class="mat-card bg-five">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="visitProspect">Visit Prospect</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="visitProspectCount">
                  {{ currentSiteVisitProspectFollowups }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">share_location</mat-icon>
              </div>
            </div>
          </mat-card>
          <mat-card (click)="navigateToLeadsByCurrentStatus(ncStatusId)" class="mat-card bg-eleven">
            <!-- <h3 class="cardtitle">Non Contactable</h3>
        <h2 class="total">{{ nonContactableCount }}</h2> -->
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="nonContactable">Non Contactable</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="nonContactableCount">
                  {{ currentNonContactableCount || 0 }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >phone_disabled</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card (click)="navigateToLeadsByCurrentStatus(qualifiedId)" class="mat-card bg-seventeen">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="lost">Qualified</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="lostCount">
                  {{ currentQualified || 0 }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">how_to_reg</mat-icon>
              </div>
            </div>
          </mat-card>

          <mat-card (click)="navigateToLeadsByCurrentStatus(lostId)" class="mat-card bg-ten">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="lost">Lost</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="lostCount">{{ currentLost || 0 }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">close</mat-icon>
              </div>
            </div>
          </mat-card>

          <mat-card (click)="navigateToLeadsByCurrentStatus(junkId)" class="mat-card bg-twelve">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="lost">Junk</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="lostCount">{{ currentJunk || 0 }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">devices_fold</mat-icon>
              </div>
            </div>
          </mat-card>
          </div>
          </div>
          <div style="width: 100%;">
            <h2 style="padding-left: 15px;">Sales</h2>
            <div style="display: flex;direction:row;width: 100%;">
          <mat-card (click)="navigateToLeadsByCurrentStatus(siteVisitDoneId)" class="mat-card bg-one">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="siteVisitDone">Site Visit Done</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="siteVisitDoneCount">
                  {{ currentSiteVisitDoneCount }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >person_pin_circle</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card (click)="navigateToLeadsByCurrentStatus(salesFollwupId)" class="mat-card bg-TwentyOne"
                  id="eoiReceivedCount">
                  <div class="mat-card-hdiv">
                    <h3 class="cardtitle" id="salesFollowUp">Sales Follow-Up</h3>
                  </div>
                  <div class="mat-card-countdiv">
                    <div class="mat-card-count">
                      <h2 class="total" id="salesFollowUp">
                        {{ currentSalesFollowupCount || 0 }}
                      </h2>
                    </div>
                    <div class="mat-card-icondiv">
                      <mat-icon
                        class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">contact_phone</mat-icon>
                    </div>
                  </div>
                </mat-card>

                <mat-card (click)="navigateToLeadsByCurrentStatus(salesLostId)" class="mat-card bg-TwentyTwo"
                  id="salesLostId">
                  <div class="mat-card-hdiv">
                    <h3 class="cardtitle" id="salesLost">Sales Lost</h3>
                  </div>
                  <div class="mat-card-countdiv">
                    <div class="mat-card-count">
                      <h2 class="total" id="salesLostId">
                        {{ currentSalesLostCount || 0 }}
                      </h2>
                    </div>
                    <div class="mat-card-icondiv">
                      <mat-icon
                        class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">close</mat-icon>
                    </div>
                  </div>
                </mat-card>

                <mat-card (click)="navigateToLeadsByCurrentStatus(salesNonContactableId)" class="mat-card bg-nineteen"
                  id="salesNonContactable">
                  <div class="mat-card-hdiv">
                    <h3 class="cardtitle" id="salesNonContactable">Sales Non-Contactable</h3>
                  </div>
                  <div class="mat-card-countdiv">
                    <div class="mat-card-count">
                      <h2 class="total" id="salesLostId">
                        {{ currentSalesNonContactable || 0 }}
                      </h2>
                    </div>
                    <div class="mat-card-icondiv">
                      <mat-icon
                        class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">phone_disabled</mat-icon>
                    </div>
                  </div>
                </mat-card>

                <mat-card (click)="navigateToLeadsByCurrentStatus(salesJunkId)" class="mat-card bg-TwentyThree"
                  id="salesJunkId">
                  <div class="mat-card-hdiv">
                    <h3 class="cardtitle" id="salesJunkId">Sales Junk</h3>
                  </div>
                  <div class="mat-card-countdiv">
                    <div class="mat-card-count">
                      <h2 class="total" id="salesJunkId">
                        {{ currentSalesJunkCount|| 0 }}
                      </h2>
                    </div>
                    <div class="mat-card-icondiv">
                      <mat-icon
                        class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">devices_fold</mat-icon>
                    </div>
                  </div>
                </mat-card>
                <mat-card (click)="navigateToLeadsByCurrentStatus(salesDNDId)" class="mat-card bg-Twenty" id="salesDND">
                  <div class="mat-card-hdiv">
                    <h3 class="cardtitle" id="salesDND">Sales DND</h3>
                  </div>
                  <div class="mat-card-countdiv">
                    <div class="mat-card-count">
                      <h2 class="total" id="salesDND">
                        {{ currentSalesDNDcount|| 0 }}
                      </h2>
                    </div>
                    <div class="mat-card-icondiv">
                      <mat-icon
                        class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">person_off</mat-icon>
                    </div>
                  </div>
                </mat-card>

          <mat-card
            (click)="navigateToLeadsByCurrentStatus(currentReVisitProposedId)"
            class="mat-card bg-eigthteen"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="siteVisitDone">ReVisit Proposed</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="siteVisitDoneCount">
                  {{ currentReVisitProposed }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >person_pin_circle</mat-icon
                >
              </div>
            </div>
          </mat-card>

          <mat-card
            (click)="navigateToLeadsByCurrentStatus(reVisitDoneId)"
            class="mat-card bg-sixteen"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="siteVisitDone">ReVisit Done</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="siteVisitDoneCount">
                  {{ currentrevisitDoneCount }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >person_pin_circle</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card
            (click)="navigateToLeadsByCurrentStatus(bookedId)"
            class="mat-card bg-three"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="booked">Booked</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="bookedCount">{{ currentBookedCount }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >real_estate_agent</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card
            (click)="navigateToLeadsByCurrentStatus(bookedCancelledId)"
            class="mat-card bg-eight"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="bookedCancelled">Cancelled Bookings</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="bookedCancelledCount">
                  {{ currentBookedCancelledCount || 0 }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >domain_disabled</mat-icon
                >
              </div>
            </div>
          </mat-card>

         
          <!-- class="mat-card bg-thirteen" -->
          <div style="width: 200px">
            <mat-card
              (click)="navigateToLeadsByCurrentStatus(eoiReceivedId)"
              class="mat-card bg-thirteen"
            >
              <div class="mat-card-hdiv">
                <h3 class="cardtitle" id="eoiReceived">EOI Received</h3>
              </div>
              <div class="mat-card-countdiv">
                <div class="mat-card-count">
                  <h2 class="total" id="eoiReceivedCount">
                    {{ currentEoiReceivedStatus || 0 }}
                  </h2>
                </div>
                <div class="mat-card-icondiv">
                  <mat-icon
                    class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                    >feedback</mat-icon
                  >
                </div>
              </div>
            </mat-card>
            </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <!--current status end   -->

  <div class="margin-20" style="padding-top: 20px">
    <mat-accordion>
      <mat-expansion-panel
        [expanded]="panel2Expanded"
        (opened)="onPanelOpen(2)"
        (closed)="onPanelClose(2)"
      >
        <mat-expansion-panel-header>
          <mat-panel-title> Lead Status Count </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="cards">
          <div style="width: 100%;">
            <h2 style="padding-left: 15px;">Pre Sales</h2>
            <div style="display: flex;direction: row;width: 100%;">
          <mat-card (click)="navigateToLeads()" class="mat-card bg-six">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="leads">Assigned Leads</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="leadsCount">{{ dashboardnewLeads }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >assignment_add</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <!-- <mat-card
            (click)="navigateToSaleLeads()"
            class="mat-card bg-darkColor"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="assignedLeads">Sales Assigned Leads</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="assignedLeadsCount">{{ salesLeads }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >assignment_add</mat-icon
                >
              </div>
            </div>
          </mat-card> -->
          <mat-card
            (click)="navigateToLeadsByStatus(newLeadId)"
            class="mat-card bg-nine"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="newLeads">Pending Leads</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="newLeadsCount">{{ newLeads }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >contact_page</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <!-- <mat-card
            (click)="navigateToUnassignedLeads()"
            class="mat-card bg-twelve"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="unassignedLeads">Unassigned Leads</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="unassignedLeadsCount">
                  {{ unassignedLeads }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >assignment_sub</mat-icon
                >
              </div>
            </div>
          </mat-card> -->

          <mat-card
            (click)="navigateToLeadsByStatus(followUpId)"
            class="mat-card bg-seven"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="followups">Follow Ups</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="followupCount">{{ followupCount }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >contact_phone</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card
            (click)="navigateToLeadsByStatus(followupIds)"
            class="mat-card bg-fifteen"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="followups">Site Visit Confirm</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="followupCount">
                  {{ dashboardFollowups }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >directions_walk</mat-icon
                >
              </div>
            </div>
          </mat-card>

          <!-- <mat-card
        (click)="navigateToFollowups('Site visit Confirm ')"
        class="mat-card bg-purple"
      >
        <h3 class="cardtitle">Scheduled Visits</h3>
        <h2 class="total">{{ scheduledVisits }}</h2>
      </mat-card> -->
          <mat-card
            (click)="navigateToLeadsByStatus(ncStatusId)"
            class="mat-card bg-eleven"
          >
            <!-- <h3 class="cardtitle">Non Contactable</h3>
        <h2 class="total">{{ nonContactableCount }}</h2> -->
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="nonContactable">Non Contactable</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="nonContactableCount">
                  {{ nonContactableCount || 0 }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >phone_disabled</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card (click)="navigateToLeadsByStatus(lostId)" class="mat-card bg-ten">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="lost">Lost</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="lostCount">{{ lostCount || 0 }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">close</mat-icon>
              </div>
            </div>
          </mat-card>
          <mat-card (click)="navigateToLeadsByStatus(siteVisitProspectId)" class="mat-card bg-five">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="visitProspect">Visit Prospect</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="visitProspectCount">
                  {{ siteVisitProspectFollowups }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >share_location</mat-icon
                >
              </div>
            </div>
          </mat-card>
</div>
</div>
<div style="width: 100%;">
  <h2 style="padding-left: 15px;">Sales</h2>
  <div style="width: 100%;display: flex;direction: row;">
          <mat-card (click)="navigateToLeadsByStatus(siteVisitDoneId)" class="mat-card bg-one">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="siteVisitDone">Site Visit Done</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="siteVisitDoneCount">
                  {{ siteVisitDoneCount }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >person_pin_circle</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card (click)="navigateToLeadsByStatus(salesFollwupId)" class="mat-card bg-TwentyOne"
          id="eoiReceivedCount">
          <div class="mat-card-hdiv">
            <h3 class="cardtitle" id="salesFollowUp">Sales Follow-Up</h3>
          </div>
          <div class="mat-card-countdiv">
            <div class="mat-card-count">
              <h2 class="total" id="salesFollowUp">
                {{ salesFollowupCount || 0 }}
              </h2>
            </div>
            <div class="mat-card-icondiv">
              <mat-icon
                class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">contact_phone</mat-icon>
            </div>
          </div>
        </mat-card>

        <mat-card (click)="navigateToLeadsByStatus(salesLostId)" class="mat-card bg-TwentyTwo" id="salesLostId">
          <div class="mat-card-hdiv">
            <h3 class="cardtitle" id="salesLost">Sales Lost</h3>
          </div>
          <div class="mat-card-countdiv">
            <div class="mat-card-count">
              <h2 class="total" id="salesLostId">
                {{ salesLostCount || 0 }}
              </h2>
            </div>
            <div class="mat-card-icondiv">
              <mat-icon
                class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">close</mat-icon>
            </div>
          </div>
        </mat-card>

        <mat-card (click)="navigateToLeadsByStatus(salesNonContactableId)" class="mat-card bg-nineteen"
          id="salesNonContactable">
          <div class="mat-card-hdiv">
            <h3 class="cardtitle" id="salesNonContactable">Sales Non-Contactable</h3>
          </div>
          <div class="mat-card-countdiv">
            <div class="mat-card-count">
              <h2 class="total" id="salesLostId">
                {{ salesNonContactable || 0 }}
              </h2>
            </div>
            <div class="mat-card-icondiv">
              <mat-icon
                class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">phone_disabled</mat-icon>
            </div>
          </div>
        </mat-card>



        <mat-card (click)="navigateToLeadsByStatus(salesJunkId)" class="mat-card bg-TwentyThree"
          id="salesJunkId">
          <div class="mat-card-hdiv">
            <h3 class="cardtitle" id="salesJunkId">Sales Junk</h3>
          </div>
          <div class="mat-card-countdiv">
            <div class="mat-card-count">
              <h2 class="total" id="salesJunkId">
                {{ salesJunkCount|| 0 }}
              </h2>
            </div>
            <div class="mat-card-icondiv">
              <mat-icon
                class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">devices_fold</mat-icon>
            </div>
          </div>
        </mat-card>
        <mat-card (click)="navigateToLeadsByStatus(salesDNDId)" class="mat-card bg-Twenty" id="salesDND">
          <div class="mat-card-hdiv">
            <h3 class="cardtitle" id="salesDND">Sales DND</h3>
          </div>
          <div class="mat-card-countdiv">
            <div class="mat-card-count">
              <h2 class="total" id="salesDND">
                {{ salesDNDcount|| 0 }}
              </h2>
            </div>
            <div class="mat-card-icondiv">
              <mat-icon
                class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color">person_off</mat-icon>
            </div>
          </div>
        </mat-card>
          <mat-card (click)="navigateToLeadsByStatus(bookedId)" class="mat-card bg-three">
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="booked">Booked</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="bookedCount">{{ bookedCount }}</h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >real_estate_agent</mat-icon
                >
              </div>
            </div>
          </mat-card>
          <mat-card
            (click)="navigateToLeadsByStatus(bookedCancelledId)"
            class="mat-card bg-eight"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="bookedCancelled">Cancelled Bookings</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="bookedCancelledCount">
                  {{ bookedCancelledCount || 0 }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >domain_disabled</mat-icon
                >
              </div>
            </div>
          </mat-card>
         
          <!-- class="mat-card bg-thirteen" -->
          <mat-card
            (click)="navigateToLeadsByStatus(eoiReceivedId)"
            class="mat-card bg-thirteen"
          >
            <div class="mat-card-hdiv">
              <h3 class="cardtitle" id="eoiReceived">EOI Received</h3>
            </div>
            <div class="mat-card-countdiv">
              <div class="mat-card-count">
                <h2 class="total" id="eoiReceivedCount">
                  {{ eoiReceivedStatus || 0 }}
                </h2>
              </div>
              <div class="mat-card-icondiv">
                <mat-icon
                  class="dashboard-icon notranslate menu-icon material-icons mat-ligature-font mat-icon-no-color"
                  >feedback</mat-icon
                >
              </div>
            </div>
          </mat-card>
          </div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>

    <!-- CPL<CPV<CPB -->
    <div class="team-data-table-container" *ngIf="isDigitalMarketing">
      <div
        style="
          display: flex;
          direction: row;
          justify-content: center;
          padding-top: 10px;
        "
      >
        <h3 class="table-header">Lead Budget</h3>
        <div class="day-selector" [formGroup]="leadBudgetdateRangeForm">
          <mat-form-field class="time-picker" appearance="outline">
            <mat-label>Select Date Range</mat-label>
            <mat-date-range-input [rangePicker]="picker">
              <input
                matStartDate
                placeholder="Start date"
                formControlName="leadBudgetCustomStartDate"
              />
              <input
                matEndDate
                placeholder="End date"
                formControlName="leadBudgetCustomEndDate"
              />
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
          </mat-form-field>
        </div>
      </div>
      <!-- Child Nodes -->

      <mat-card>
        <table class="tree-table" id="leadSourceTable">
          <thead>
            <tr>
              <th class="row-heads">Source</th>
              <th class="row-heads">Budget</th>
              <th class="row-heads">Lead Count</th>
              <th class="row-heads">CPL</th>
              <th class="row-heads">Booked Count</th>
              <th class="row-heads">CPB</th>
              <th class="row-heads">Visit Done Lead Count</th>
              <th class="row-heads">CPV</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let node of treeData1; let i = index">
              <!-- Parent Node (Leads) -->
              <tr
                [ngClass]="{
                  'main-row-active': isActive(getUniqueId(node, i))
                }"
                style="cursor: cell"
              >
                <td
                  (click)="toggle(getUniqueId(node, i))"
                  style="display: flex"
                >
                  <mat-icon
                    class="menu-icon"
                    *ngIf="node.children && node.children.length > 0"
                  >
                    {{ isExpanded(getUniqueId(node, i)) ? "remove" : "add" }}
                  </mat-icon>
                  {{ node.name }}
                </td>

                <td>{{ node.budget ? node.budget : "0" }}</td>
                <td>{{ node.leadCount ? node.leadCount : "0" }}</td>
                <td>{{ node.costPerLead ? node.costPerLead : "0" }}</td>
                <td>{{ node.bookedLeadCount ? node.bookedLeadCount : "0" }}</td>
                <td>{{ node.costPerBooking ? node.costPerBooking : "0" }}</td>
                <td>{{ node.siteVisitDone ? node.siteVisitDone : "0" }}</td>
                <td>
                  {{
                    node.costPerSitevisitDone ? node.costPerSitevisitDone : "0"
                  }}
                </td>
              </tr>
              <!-- Child Nodes (Sources) -->
              <ng-container
                *ngIf="node.children && isExpanded(getUniqueId(node, i))"
              >
                <ng-container
                  *ngFor="let child of node.children; let j = index"
                >
                  <tr
                    [ngClass]="{
                      'child-row-active': isActive(getUniqueId(child, i, j))
                    }"
                    style="cursor: cell"
                  >
                    <td
                      (click)="toggle(getUniqueId(child, i, j))"
                      style="display: flex"
                    >
                      <mat-icon
                        class="menu-icon"
                        *ngIf="child.children && child.children.length > 0"
                      >
                        {{
                          isExpanded(getUniqueId(child, i, j))
                            ? "remove"
                            : "add"
                        }}
                      </mat-icon>
                      {{ child.name }}
                    </td>
                    <td>{{ child.budget ? child.budget : "0" }}</td>
                    <td>{{ child.leadCount ? child.leadCount : "0" }}</td>
                    <td>{{ child.costPerLead ? child.costPerLead : "0" }}</td>
                    <td>
                      {{ child.bookedLeadCount ? child.bookedLeadCount : "0" }}
                    </td>
                    <td>
                      {{ child.costPerBooking ? child.costPerBooking : "0" }}
                    </td>
                    <td>
                      {{ child.siteVisitDone ? child.siteVisitDone : "0" }}
                    </td>
                    <td>
                      {{
                        child.costPerSitevisitDone
                          ? child.costPerSitevisitDone
                          : "0"
                      }}
                    </td>
                  </tr>
                </ng-container>
              </ng-container>
            </ng-container>
          </tbody>
        </table>
      </mat-card>
    </div>
    <div
      style="
        width: 30%;
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      "
    >
      <!-- First Pie Chart -->
      <div *ngIf="isShowSourcePie">
        <div class="pie-chart">
          <apx-chart
            [series]="leadSourceChartOptions.series"
            [chart]="leadSourceChartOptions.chart"
            [labels]="leadSourceChartOptions.labels"
            [colors]="leadSourceChartOptions.colors"
            [responsive]="leadSourceChartOptions.responsive"
          ></apx-chart>
        </div>
      </div>
    </div>
  </div>
</div>
